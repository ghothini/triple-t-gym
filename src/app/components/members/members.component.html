<div class="main-container">
    <app-toolbar *ngIf="!filteredMembers.filteredType" [component]="selectedNav"></app-toolbar>
    <h2 *ngIf="!gymMembersAvailable" class="no-members-err no-margin">0 gym members added.</h2>
    <div *ngIf="!filteredMembers.filteredType" (click)="addMember()" title="Add member"
        class="add-member flex center-center pointer">
        <mat-icon>add</mat-icon>
    </div>
    <form *ngIf="gymMembersAvailable" class="flex column gap-1em">
        <div class="flex outer-search space-between a-center">
            <div class="search-container">
                <input class="search" type="text" (keyup)="applyFilter($event)" #input placeholder="Search ...">
                <mat-icon class="search-icon">search</mat-icon>
            </div>
            <h2 *ngIf="filteredMembers.filteredType" class="filtered-members">Recent <span class="span">{{filteredMembers.filteredType}}</span> members</h2>
        </div>
        <div class="mat-elevation-z8 full-width">
            <table mat-table [dataSource]="dataSource" matSort>

                <!-- MembershipNo Column -->
                <ng-container matColumnDef="membershipNo">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Membership Number </th>
                    <td mat-cell *matCellDef="let row"> {{row.membershipNo}} </td>
                </ng-container>

                <!-- Joindate Column -->
                <ng-container matColumnDef="joinDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Join Date </th>
                    <td mat-cell *matCellDef="let row"> {{row.joinDate | date}} </td>
                </ng-container>

                <!-- Full Name Column -->
                <ng-container matColumnDef="fullName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Name</th>
                    <td mat-cell *matCellDef="let row"> {{row.fullName | titlecase}} </td>
                </ng-container>

                <!-- Gender Column -->
                <ng-container matColumnDef="gender">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Gender </th>
                    <td mat-cell *matCellDef="let row"> {{row.gender | titlecase}} </td>
                </ng-container>

                <!-- Contact Column -->
                <ng-container matColumnDef="contact">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Contact </th>
                    <td mat-cell *matCellDef="let row"> {{row.cellphone ? row.cellphone : row.emergencyCellphone ? row.emergencyCellphone: row.email }} </td>
                </ng-container>

                <!-- Payments Column -->
                <ng-container matColumnDef="payments">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Payments </th>
                    <td mat-cell *matCellDef="let row">
                        <img class="payment-img pointer" (click)="seePayment(row)" src="https://img.freepik.com/premium-vector/card-payment-icon-bank-terminal-card-payment_256722-639.jpg" alt="Add payment image">
                    </td>
                </ng-container>

                <!-- Action Column -->
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Action </th>
                    <td mat-cell *matCellDef="let row">
                        <div class="flex gap-05em a-center">
                            <mat-icon (click)="editMember(row)" class="action">edit</mat-icon>
                            <mat-icon (click)="deleteMember(row)" class="action">delete</mat-icon>
                        </div>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                <!-- Row shown when there is no matching data. -->
                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="4">0 search results matching "{{input.value}}"</td>
                </tr>
            </table>

            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users"></mat-paginator>
        </div>
    </form>
</div>